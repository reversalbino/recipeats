extends layout.pug

block content
    div.parentDivOne
        div.imageDiv
            img(src= recipe.image)
        div.textDiv
            h2= recipe.id
            h1= recipe.title
            h2= recipe.author
            div.ratings Ratings
            if locals.authenticated
                if errors
                    each error in errors
                        li= error
                a(href="/boards/new") Create a new board!
                form(action=`/recipes/${recipe.id}/boards` method="post")
                    select(name="addToBoard")
                        each board in recipeBoards
                            option(value= board.id)= board.name
                    button(type="submit") Add to Board
            if !locals.authenticated
                a(href=`/users/login`) Log in to create a board!
    div.parentDivTwo
        div.ingredients
            each ingredient in recipe.Ingredients
                p= ingredient.amount + " " + ingredient.measurementUnit + " " + ingredient.name
        div.instructions
            each instruction in recipe.Instructions
                p= instruction.specification
    div.reviewsContainer
        if locals.authenticated
            form(action= `/recipes/${recipe.id}/review/add`, method="post") 
                input(type="hidden" value=csrfToken name="_csrf")
                textarea(name="reviewbody" value= reviews.reviewText maxlength='255')
                button(type="submit") Submit Review
        if reviews   
            table 
                thead 
                    tr
                        th username
                        th review 
                tbody 
                    each review in reviews
                        tr(class="reviewRow" id=`${review.userId}`)
                            td(class="reviewUserId")= review.userId
                            td(class="reviewReviewText")= review.reviewText
                                if (2 === 2)
                                form(action=`/recipes/reviews/${review.id}/edit`, method="post")
                                    input(type="hidden" value=csrfToken name="_csrf")
                                    button#editButton Edit 
                                form(action=`/recipes/reviews/${review.id}/delete`, method="post") 
                                    input(type="hidden" value=csrfToken name="_csrf")
                                    button#deleteButton Delete 
                                

